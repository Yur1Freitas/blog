---
import { getCollection } from 'astro:content'

import SubscribeRSS from '~/components/SubscribeRSS.astro'
import Navigation from '~/components/Navigation.astro'
import Container from '~/components/Container.astro'
import Header from '~/components/Header.astro'

import { SITE_DESCRIPTION, SITE_TITLE, SITE_LANG } from '../config'
import ColorScript from '../scripts/ColorScript.astro'
import BaseHead from '../components/BaseHead.astro'
import PostList from '../components/PostList.astro'
import TagList from '../components/TagList.astro'
import Footer from '../components/Footer.astro'
import { Content as About } from './about.md'
import getTags from '../utils/getTags'

const posts = await getCollection('posts')
const tags = getTags(posts)
---

<!doctype html>
<html lang={SITE_LANG}>
    <BaseHead description={SITE_DESCRIPTION} title={SITE_TITLE} />
    <body>
        <Container>
            <Header />
            <Navigation />
            <main>
                <section>
                    <About />
                </section>

                <section>
                    <h3>Postagens recentes:</h3>
                    <PostList posts={posts} limit={5} sort />
                    <SubscribeRSS />
                </section>

                <section>
                    <h3>Ver posts por tag:</h3>
                    <TagList {tags} />
                </section>
            </main>
            <Footer />
        </Container>
        <ColorScript />
    </body>
</html>
